(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{86:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);a(55);var n=a(0),r=a(29),c=a.n(r),o=a(17),s=a(7),l=a(6),i=a(93),u=a(92),j=a(89),d=a(2),b=Object(n.createContext)(),p=function(e){var t=e.reducer,a=e.initialState,r=e.children;return Object(d.jsx)(b.Provider,{value:Object(n.useReducer)(t,a),children:r})},O=function(){return Object(n.useContext)(b)},h=function(){var e=O(),t=Object(l.a)(e,2),a=t[0],n=t[1],r=a.authenticated,c=a.user;return Object(d.jsxs)(i.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(d.jsx)(o.b,{to:"/",children:Object(d.jsxs)(i.a.Brand,{className:"text-capitalize",children:[(null===c||void 0===c?void 0:c.name)?c.name+"'s":"My"," todo List"]})}),Object(d.jsx)(i.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(d.jsx)(i.a.Collapse,{id:"responsive-navbar-nav",children:Object(d.jsxs)(u.a,{className:"ml-auto",children:[!r&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(o.b,{className:"ml-auto ",to:"/login",children:Object(d.jsx)(j.a,{className:"mr-md-3 mt-2 mt-sm-0",children:"Login"})}),Object(d.jsx)(o.b,{className:"ml-auto mt-2 mt-sm-0",to:"/register",children:Object(d.jsx)(j.a,{children:"Register"})})]}),r&&Object(d.jsx)(o.b,{className:"ml-auto mt-2 mt-sm-0",to:"/login",children:Object(d.jsx)(j.a,{variant:"danger",onClick:function(){n({type:"LOGOUT"})},children:"Logout"})})]})})]})},m=a(90),x=a(11),f=a.n(x),v=a(21),g=a(16),y=a.n(g),k=function(e){e?y.a.defaults.headers.common["x-auth-token"]=e:delete y.a.defaults.headers.common["x-auth-token"]},S=function(){var e=Object(v.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,y.a.post("/api/users",a,n);case 4:r=e.sent,localStorage.setItem("token",r.data.token),t({type:"REGISTER",payload:r.data}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t({type:"REGISTER_FAIL",payload:e.t0.response.data.msg});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}(),C=function(){var e=Object(v.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,y.a.post("/api/auth",a,n);case 4:r=e.sent,localStorage.setItem("token",r.data.token),t({type:"REGISTER",payload:r.data}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t({type:"REGISTER_FAIL",payload:e.t0.response.data.msg});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(v.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&k(localStorage.token),e.prev=1,e.next=4,y.a.get("/api/auth");case 4:a=e.sent,t({type:"LOAD_USER",payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"LOGIN_FAIL",payload:e.t0.response.data.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(v.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={headers:{"Content-Type":"application/json"}};try{y.a.post("/api/todos",a,n),E(t)}catch(r){console.log(r.response.data.msg)}case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),E=function(){var e=Object(v.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/todos");case 3:a=e.sent,t({type:"LOAD_TODOS",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(v.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.delete("/api/todos/".concat(a));case 3:E(t),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(v.a)(f.a.mark((function e(t,a,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.put("/api/todos/".concat(a),n);case 3:E(t),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a,n){return e.apply(this,arguments)}}(),N=a(91),G=function(){var e=O(),t=Object(l.a)(e,2)[1],a=Object(n.useState)(""),r=Object(l.a)(a,2),c=r[0],o=r[1],s=Object(n.useState)(!1),i=Object(l.a)(s,2),u=i[0],b=i[1];return Object(d.jsxs)(N.a,{onSubmit:function(e){e.preventDefault(),w(t,{text:c,important:u}),o(""),b(!1)},className:"bg-secondary rounded p-3 p-sm-0  mt-3 d-flex align-items-center justify-content-center flex-sm-row flex-column mb-5",children:[Object(d.jsx)(N.a.Group,{children:Object(d.jsx)(N.a.Control,{required:!0,type:"text",value:c,onChange:function(e){return o(e.target.value)},placeholder:"New todo"})}),Object(d.jsx)(N.a.Group,{controlId:"formBasicCheckbox",children:Object(d.jsx)(N.a.Check,{type:"checkbox",checked:u,onChange:function(){return b(!u)},className:"m-sm-5",label:"Urgent"})}),Object(d.jsx)(j.a,{variant:"success",type:"submit",children:"Submit"})]})},_=function(e){var t=e.todo,a=O(),r=Object(l.a)(a,2)[1],c=Object(n.useState)(!1),o=Object(l.a)(c,2),s=o[0],i=o[1],u=Object(n.useState)(t.important),b=Object(l.a)(u,2),p=b[0],h=b[1],m=Object(n.useState)(t.completed),x=Object(l.a)(m,2),f=x[0],v=x[1],g=Object(n.useState)(t.text),y=Object(l.a)(g,2),k=y[0],S=y[1],C=function(e){"important"===e.target.name?h(!p):v(!f)};return Object(d.jsx)("div",{className:"todo-item mb-4 bg-dark rounded p-2 pr-md-5 pl-md-5 text-light",children:Object(d.jsxs)(N.a,{onSubmit:function(e){e.preventDefault()},children:[Object(d.jsx)(N.a.Group,{controlId:"formBasicEmail",children:Object(d.jsx)(N.a.Control,{variant:"primary",className:"bg-".concat(f?"secondary":p?"danger":"info","   text-light text-uppercase font-weight-bold"),disabled:!s,value:k,onChange:function(e){S(e.target.value)},type:"text"})}),Object(d.jsxs)("div",{className:"d-flex justify-content-between font-weight-bold flex-wrap",children:[Object(d.jsx)(N.a.Check,{onChange:C,name:"important",checked:p,type:"checkbox",label:"Urgent",disabled:!s}),Object(d.jsx)(N.a.Check,{onChange:C,checked:f,type:"checkbox",disabled:!s,name:"completed",label:"Completed"}),Object(d.jsx)(j.a,{variant:s?"warning":"danger",type:"submit",size:"sm",onClick:function(){s?(I(r,t._id,{text:k,important:p,completed:f}),i(!1)):L(r,t._id)},children:s?"Update":"Delete"}),Object(d.jsx)(j.a,{onClick:function(){i(!s),h(t.important),v(t.completed),S(t.text)},size:"sm",variant:"primary",children:s?"Cancel":"Edit"})]})]})})},T=a(96),A=a(94),D=function(e){var t=e.history,a=O(),r=Object(l.a)(a,2),c=r[0],o=r[1],s=c.authenticated,i=c.todos;return Object(n.useEffect)((function(){localStorage.token&&R(o),s||t.push("/login"),E(o)}),[]),Object(d.jsxs)(m.a,{className:" d-flex justify-content-center flex-column",children:[Object(d.jsx)(G,{}),Object(d.jsx)(T.a,{className:"todo-list",children:i.map((function(e){return Object(d.jsx)(A.a,{classNames:"item",timeout:500,children:Object(d.jsx)(_,{todo:e})},e._id)}))})]})},B=a(95),P=function(){var e=O(),t=Object(l.a)(e,2),a=t[0],r=t[1],c=a.error,o=a.token,i=a.authenticated,u=Object(n.useState)(""),b=Object(l.a)(u,2),p=b[0],h=b[1],x=Object(n.useState)(""),f=Object(l.a)(x,2),v=f[0],g=f[1],y=Object(n.useState)(""),k=Object(l.a)(y,2),C=k[0],w=k[1],E=Object(n.useState)(""),L=Object(l.a)(E,2),I=L[0],G=L[1];Object(n.useEffect)((function(){_(),o&&R(r)}),[o,r]);var _=function(){r({type:"CLEAR_ERROR"})};return Object(d.jsxs)(m.a,{className:"mt-5",children:[Object(d.jsx)("h3",{className:"text-center",children:"Register"}),i&&Object(d.jsx)(s.a,{to:"/"}),c&&Object(d.jsxs)(B.a,{variant:"danger",onClose:function(){return _()},dismissible:!0,children:[Object(d.jsx)(B.a.Heading,{children:"Oh snap! You got an error!"}),Object(d.jsx)("p",{children:c})]}),Object(d.jsxs)(N.a,{onSubmit:function(e){e.preventDefault(),C!==I?r({type:"SET_ERROR",payload:"Passwords do not match!"}):(S(r,{email:p,password:C,name:v}),r({type:"CLEAR_ERROR"}))},children:[Object(d.jsxs)(N.a.Group,{children:[Object(d.jsx)(N.a.Label,{children:"Name"}),Object(d.jsx)(N.a.Control,{value:v,onChange:function(e){return g(e.target.value)},type:"text",placeholder:"Username"})]}),Object(d.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(d.jsx)(N.a.Label,{children:"Email address"}),Object(d.jsx)(N.a.Control,{onChange:function(e){return h(e.target.value)},value:p,type:"email",placeholder:"Enter email"}),Object(d.jsx)(N.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(d.jsxs)(N.a.Group,{controlId:"formBasicPassword",children:[Object(d.jsx)(N.a.Label,{children:"Password"}),Object(d.jsx)(N.a.Control,{value:C,onChange:function(e){return w(e.target.value)},type:"password",placeholder:"Password"})]}),Object(d.jsxs)(N.a.Group,{controlId:"formBasicPassword2",children:[Object(d.jsx)(N.a.Label,{children:"Confirm password"}),Object(d.jsx)(N.a.Control,{value:I,onChange:function(e){return G(e.target.value)},type:"password",placeholder:"Confirm password"})]}),Object(d.jsx)(j.a,{variant:"primary",type:"submit",children:"Submit"})]})]})},U=function(){var e=O(),t=Object(l.a)(e,2),a=t[0],r=t[1],c=a.error,o=a.token,i=a.authenticated,u=Object(n.useState)(""),b=Object(l.a)(u,2),p=b[0],h=b[1],x=Object(n.useState)(""),f=Object(l.a)(x,2),v=f[0],g=f[1],y=function(){r({type:"CLEAR_ERROR"})};return Object(n.useEffect)((function(){y(),o&&R(r)}),[o,r]),Object(d.jsxs)(m.a,{className:"mt-5",children:[Object(d.jsx)("h3",{className:"text-center",children:"Login"}),i&&Object(d.jsx)(s.a,{to:"/"}),c&&Object(d.jsxs)(B.a,{variant:"danger",onClose:function(){return y()},dismissible:!0,children:[Object(d.jsx)(B.a.Heading,{children:"Oh snap! You got an error!"}),Object(d.jsx)("p",{children:c})]}),Object(d.jsxs)(N.a,{onSubmit:function(e){e.preventDefault(),v&&p?C(r,{email:v,password:p}):r({type:"SET_ERROR",payload:"Both email and password are required!"})},children:[Object(d.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(d.jsx)(N.a.Label,{children:"Email address"}),Object(d.jsx)(N.a.Control,{onChange:function(e){return g(e.target.value)},value:v,type:"email",placeholder:"Enter email"})]}),Object(d.jsxs)(N.a.Group,{controlId:"formBasicPassword",children:[Object(d.jsx)(N.a.Label,{children:"Password"}),Object(d.jsx)(N.a.Control,{value:p,onChange:function(e){return h(e.target.value)},type:"password",placeholder:"Password"})]}),Object(d.jsx)(j.a,{variant:"primary",type:"submit",children:"Submit"})]})]})};a(86);function F(){return Object(d.jsxs)(o.a,{children:[Object(d.jsx)(h,{}),Object(d.jsxs)(s.d,{children:[Object(d.jsx)(s.b,{exact:!0,path:"/",component:D}),Object(d.jsx)(s.b,{exact:!0,path:"/register",component:P}),Object(d.jsx)(s.b,{exact:!0,path:"/login",component:U})]})]})}localStorage.token&&k(localStorage.token);var z=a(8),q=function(e,t){switch(t.type){case"REGISTER":return Object(z.a)(Object(z.a)({},e),{},{token:t.payload});case"LOAD_USER":return Object(z.a)(Object(z.a)({},e),{},{user:Object(z.a)({},t.payload),token:null,authenticated:!0});case"REGISTER_FAIL":return localStorage.removeItem("token"),Object(z.a)(Object(z.a)({},e),{},{user:null,error:t.payload});case"SET_ERROR":return Object(z.a)(Object(z.a)({},e),{},{token:null,user:null,error:t.payload});case"CLEAR_ERROR":return Object(z.a)(Object(z.a)({},e),{},{error:null});case"LOGOUT":return localStorage.removeItem("token"),Object(z.a)(Object(z.a)({},e),{},{authenticated:null});case"LOGIN_FAIL":return Object(z.a)(Object(z.a)({},e),{},{error:t.payload,user:null,token:null,authenticated:!1});case"LOAD_TODOS":return Object(z.a)(Object(z.a)({},e),{},{todos:t.payload});default:return e}};c.a.render(Object(d.jsx)(p,{initialState:{token:null,error:null,authenticated:!1,user:{},todos:[]},reducer:q,children:Object(d.jsx)(F,{})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.af7492d2.chunk.js.map